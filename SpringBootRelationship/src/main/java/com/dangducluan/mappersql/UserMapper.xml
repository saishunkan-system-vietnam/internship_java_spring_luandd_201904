<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.dangducluan.mapper.UserMapper">
	<select id="getAllUsers" resultMap="UserResult">
		select u.USER_ID, u.EMAIL_ID, u.PASSWORD, u.FIRST_NAME, u.LAST_NAME, u.BLOG_ID, b.BLOG_NAME, b.CREATED_ON
		from user u join blog b on  u.BLOG_ID = b.BLOG_ID
	</select>
	<resultMap type="User" id="UserResult">
		<id property="userId" column="user_id"/>
		<result property="emailId" column="email_id"/>
		<result property="password" column="password"/>
		<result property="firstName" column="first_name"/>
		<result property="lastName" column="last_name"/>
		<association property="blog" resultMap="BlogResult"></association>
	</resultMap>
	<resultMap type="Blog" id="BlogResult">
		<id property="blogId" column="blog_id"/>
		<result property="blogName" column="blog_name"/>
		<result property="createdOn" column="created_on"/>
	</resultMap>
	
	<select id="getUserById" parameterType="int" resultMap="UserResult">
				select u.USER_ID, u.EMAIL_ID, u.PASSWORD, u.FIRST_NAME, u.LAST_NAME, u.BLOG_ID, b.BLOG_NAME, b.CREATED_ON
		from user u join blog b on  u.BLOG_ID = b.BLOG_ID where u.USER_ID = #{userId}
	</select>
	
</mapper>